accelerator:
  displayName: SpringBoot REST API
  description: An example starting template for official spring based API at ACME Inc
  iconUrl: https://raw.githubusercontent.com/sample-accelerators/icons/master/icon-cloud.png
  tags:
    - Java
    - Spring
    - Web
    - JPA
    - API
    - ford
  options:
    - name: javaVersion
      inputType: select
      dataType: string
      display: true
      required: true
      defaultValue: "11"
      choices:
        - text: 11 (Supported in Production)
          value: "11"
        - text: 17 (Production in Oct 2022, QA only for now)
          value: "17"
    - name: noDB
      label: Stateless (Don't need a database)
      inputType: toggle
      display: false
      dataType: boolean
      defaultValue: false
    - name: sonar
      label: use sonarqube
      inputType: toggle
      display: true
      dataType: boolean
      defaultValue: false
    - name: projectKey
      label: Sonar project key
      dataType: string
      defaultValue: ''
      dependsOn:
        name: sonar

engine:
  merge:
    - include: [ "**/**" ]
      exclude: [ "reg.yaml", "components/database/**", "applications/**", "ytt/**" ]
    - include: [ "pom.xml" ]
      chain:
        - type: ReplaceText
          substitutions:
            - text: sample-api-accelerator
              with: "#artifactId"
        - condition: "#javaVersion == '17'"
        - type: ReplaceText
          substitutions:
            - text: "'<java.version>11</java.version>'"
              with: "'<java.version>17</java.version>'"
#    - condition: "#noDB == true"
#      include: [ "applications/billboard-stateless/**" ]
#    - condition: "#noDB == false"
#      include: [ "components/database/**", "applications/billboard/**" ]